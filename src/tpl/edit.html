<!DOCTYPE html>
<html>
<head>
    <include href="common/header.html"/>
    <style>
        .check-model {
            cursor: pointer;
        }
        .alert {
            border-radius: 0;
            position: fixed;
            width: 100%;
            z-index: 1000;
        }
        .base-info, .row {
            margin: 20px auto;
        }
        .submit {
            display: flex;
            width: 100%;
            height: 80px;
            align-items: center;
            justify-content: center;
        }
    </style>
</head>
<body>
<div class="alert alert-success" role="alert">
    Language: {{@language}}
    <check if="{{@language == 'us'}}"><button type="button" class="switch-language"><span>切换站点</span></button></check>
</div>
<div class="modal in" tabindex="-1" style="padding-right: 15px;">
    <div class="modal-dialog modal-sm" role="document">
        <div class="modal-content">
            <div class="modal-header">
                <button type="button" class="close" data-dismiss="modal" aria-label="Close"><span aria-hidden="true">×</span></button>
                <h4 class="modal-title" id="mySmallModalLabel">Select language</h4>
            </div>
            <div class="modal-body">
                <div class="checkbox">
                    <label>
                        <repeat group="{{@languages}}" value="{{@lang}}">
                            <input type="radio" name="language" value="{{@lang}}" style="margin-left: 10px"/> {{@lang}}
                        </repeat>
                    </label>
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn btn-primary confirm">确定</button>
            </div>
        </div>
    </div>
</div>
<div id="top-alert-holder"></div>
<div class="container">
    <div class="form-horizontal base-info">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="name">标题(长度小于80)</label>
            <div class="col-sm-10">
                <input class="form-control" type="text" id="name" name="name" placeholder="name"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="model">型号</label>
            <div class="col-sm-10">
                <div class="input-group">
                    <input class="form-control" type="text" id="model" name="model" placeholder="model"/>
                    <div class="input-group-addon check-model">Check</div>
                </div>
                <p><img src="{{@image}}"></p>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="store">店铺</label>
            <div class="col-sm-10">
                <select class="form-control" id="store" name="store">
                    <option></option>
                    <repeat group="{{@stores}}" value="{{@store}}">
                    <option value="{{@store['name']}}">{{@store['name']}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="brand">品牌</label>
            <div class="col-sm-10">
                <select class="form-control" id="brand" name="brand">
                    <option></option>
                    <repeat group="{{@brands}}" value="{{@brand}}">
                    <option value="{{@brand['name']}}">{{@brand['name']}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="price">价格</label>
            <div class="col-sm-10">
                <input class="form-control" type="text" id="price" name="price" placeholder="price"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="currency">currency</label>
            <div class="col-sm-10">
                <input class="form-control" type="text" id="currency" name="currency" placeholder="currency"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="delivery">运输方式</label>
            <div class="col-sm-10">
                <select class="form-control" id="delivery" name="delivery">
                    <option value="null"></option>
                    <option value="delivery">Delivery</option>
                    <option value="free shipping">Free Shipping</option>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="size">尺码方式</label>
            <div class="col-sm-10">
                <select class="form-control" id="size" name="size">
                    <option></option>
                    <option value="stock">现货</option>
                    <option value="manufacture">生产</option>
                </select>
            </div>
        </div>
        <hr/>
        <div class="feature">
            <div class="form-group">
                <label class="col-sm-2 control-label" for="bullet-point1">卖点1</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="bullet-point1" name="bullet-point"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="bullet-point1">卖点2</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="bullet-point2" name="bullet-point"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="bullet-point1">卖点3</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="bullet-point3" name="bullet-point"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="bullet-point1">卖点4</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="bullet-point4" name="bullet-point"></textarea>
                </div>
            </div>
            <div class="form-group">
                <label class="col-sm-2 control-label" for="bullet-point1">卖点5</label>
                <div class="col-sm-10">
                    <textarea class="form-control" id="bullet-point5" name="bullet-point"></textarea>
                </div>
            </div>
        </div>    </div>
    <hr/>
    <div class="form-horizontal">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="item-type">产品类型</label>
            <div class="col-sm-10">
                <select class="form-control" id="item-type" name="item-type">
                    <option></option>
                    <repeat group="{{@itemTypes}}" value="{{@itemType}}">
                    <option value="{{@itemType[@language]}}">{{@itemType[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="form-horizontal">
        <div class="form-group">
            <label class="col-sm-2 control-label" for="platform-height">水台(cm)</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="platform-height" name="platform-height"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="heel-height">跟高(cm)</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="heel-height" name="heel-height"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="shaft-height">筒高(cm)</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="shaft-height" name="shaft-height"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="minimum-circumference">筒围(cm)</label>
            <div class="col-sm-10">
                <input type="text" class="form-control" id="minimum-circumference" name="minimum-circumference"/>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="heel">Heel Type</label>
            <div class="col-sm-10">
                <select class="form-control" id="heel" name="heel">
                    <option></option>
                    <repeat group="{{@heels}}" value="{{@heel}}">
                    <option value="{{@heel[@language]}}">{{@heel[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="strap">Strap Type</label>
            <div class="col-sm-10">
                <select class="form-control" id="strap" name="strap">
                    <option></option>
                    <repeat group="{{@straps}}" value="{{@strap}}">
                    <option value="{{@strap[@language]}}">{{@strap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="closure">Closure Type</label>
            <div class="col-sm-10">
                <select class="form-control" id="closure" name="closure">
                    <option></option>
                    <repeat group="{{@closures}}" value="{{@closure}}">
                    <option value="{{@closure[@language]}}">{{@closure[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="pattern">Pattern Type</label>
            <div class="col-sm-10">
                <select class="form-control" id="pattern" name="pattern">
                    <option></option>
                    <repeat group="{{@patterns}}" value="{{@pattern}}">
                    <option value="{{@pattern[@language]}}">{{@pattern[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="toe">Toe Type</label>
            <div class="col-sm-10">
                <select class="form-control" id="toe" name="toe">
                    <option></option>
                    <repeat group="{{@toes}}" value="{{@toe}}">
                    <option value="{{@toe[@language]}}">{{@toe[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="lifestyle">Occasion Lifestyle</label>
            <div class="col-sm-10">
                <select class="form-control" id="lifestyle" name="lifestyle">
                    <option></option>
                    <repeat group="{{@lifestyles}}" value="{{@lifestyle}}">
                    <option value="{{@lifestyle[@language]}}">{{@lifestyle[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="material">Material Fabric</label>
            <div class="col-sm-10">
                <select class="form-control" id="material" name="material">
                    <option></option>
                    <repeat group="{{@materials}}" value="{{@material}}">
                    <option value="{{@material[@language]}}">{{@material[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="form-group">
            <label class="col-sm-2 control-label" for="height-map">Height Map</label>
            <div class="col-sm-10">
                <select class="form-control" id="height-map" name="height-map">
                    <option></option>
                    <repeat group="{{@heightMaps}}" value="{{@heightMap}}">
                    <option value="{{@heightMap[@language]}}">{{@heightMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <hr/>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Style keywords</div>
                <select class="form-control" name="keyword">
                    <option></option>
                    <repeat group="{{@keywords}}" value="{{@keyword}}">
                    <option value="{{@keyword[@language]}}">{{@keyword[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Style keywords</div>
                <select class="form-control" name="keyword">
                    <option></option>
                    <repeat group="{{@keywords}}" value="{{@keyword}}">
                    <option value="{{@keyword[@language]}}">{{@keyword[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Style keywords</div>
                <select class="form-control" name="keyword">
                    <option></option>
                    <repeat group="{{@keywords}}" value="{{@keyword}}">
                    <option value="{{@keyword[@language]}}">{{@keyword[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Special Features</div>
                <select class="form-control" name="feature">
                    <option></option>
                    <repeat group="{{@features}}" value="{{@feature}}">
                        <option value="{{@feature[@language]}}">{{@feature[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Special Features</div>
                <select class="form-control" name="feature">
                    <option></option>
                    <repeat group="{{@features}}" value="{{@feature}}">
                    <option value="{{@feature[@language]}}">{{@feature[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Special Features</div>
                <select class="form-control" name="feature">
                    <option></option>
                    <repeat group="{{@features}}" value="{{@feature}}">
                    <option value="{{@feature[@language]}}">{{@feature[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <h3>SKU 信息</h3>
    <hr/>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <div class="row">
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">子 SKU</div>
                <input type="text" class="form-control" name="sub-sku"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Name</div>
                <input type="text" class="form-control" name="color-name"/>
            </div>
        </div>
        <div class="col-xs-4">
            <div class="input-group">
                <div class="input-group-addon">Color Map</div>
                <select class="form-control" name="color-map">
                    <option></option>
                    <repeat group="{{@colorMaps}}" value="{{@colorMap}}">
                    <option value="{{@colorMap[@language]}}">{{@colorMap[@language]}}</option>
                    </repeat>
                </select>
            </div>
        </div>
    </div>
    <hr/>
    <div class="submit">
        <div class="btn-group">
            <div class="btn btn-default btn-close">关闭</div>
            <div class="btn btn-primary btn-submit">提交</div>
        </div>
    </div>
</div>
<script src="{{@BASE}}/js/kindeditor-4.1.2/kindeditor-all-min.js"></script>
<script src="{{@BASE}}/js/kindeditor-4.1.2/lang/zh-CN.js"></script>
<script>
    $(function () {
        init();

        $("#top-alert-holder").css("height", $(".alert").outerHeight());

        $(".switch-language").click(function () {
            $(".modal input").each(function () {
                if ($(this).val() == "{{@language}}") {
                    $(this).prop("checked", true);
                    return false;
                }
            })
            $(".modal.in").show();
        });

        $(".modal.in .close span").click(function () {
            $(".modal.in").hide();
        });

        $(".modal.in .confirm").click(function () {
            var language = $(".modal.in input:checked").val();
            if (!!language && language != "{{@language}}") {
                //set language to switch
                setCookie("language", language);
                location.href = location.href;
            } else {
                $(".modal.in").hide();
            }
        });

        $(".btn-close").click(function () {
            window.close();
        });

        $("input[name=name]").on('input', function () {
            var length = $(this).val().length;
            if (length > 80) {
                $(this).val($(this).val().substr(0, 80));
                length = 80;
            }
            var html = '<p class="help-block name-length">已经输入字符个数' + length + '</p>';
            $(".name-length").remove();
            $(this).after(html);
        });

        $(".check-model").click(function () {
            var model = $("input[name=model]").val();
            if (!model) {
                return alert("产品型号为空");
            } else {
                var that = $(this);
                that.append("<i class='fa fa-spinner fa-spin'></i>");
                $.get("{{@BASE}}/model/check?model=" + model)
                    .done(function (data) {
                        console.log(data);
                        var json = JSON.parse(data);
                        if (json.error.code == 0) {
                            return alert("产品型号有效");
                        } else {
                            return alert("产品型号不存在");
                        }
                    })
                    .fail(alert)
                    .always(function () {
                        that.find("i").remove();
                    })
            }
        });

        $(".btn-submit").click(function () {
            var data = buildData();
            if (data.name.length > 80) {
                return alert("产品名称不能超过80个字符");
            } else if (data.model.length < 3) {
                return alert("产品型号不能少于3个字符");
            } else if (!data.store) {
                return alert("店铺不能为空");
            } else if (isNaN(data.price) || data.price < 0) {
                return alert("产品价格输入错误");
            } else if (!data.currency) {
                return alert("currency不能为空");
            } else if (!data.size) {
                return alert("尺码方式不能为空");
            }
            data.store = data.store.toUpperCase();
            data.model = data.model.toUpperCase();
            data.currency = data.currency.toUpperCase();
            console.log("post data: ", data);
            $(this).append("<i class='fa fa-spinner fa-spin'></i>");
            $.post("{{@BASE}}/Create", data)
                .done(function (data) {
                    var json = JSON.parse(data);
                    if (json.error.code == 0) {
                        alert("已保存");
                        window.close();
                    } else {
                        alert(json.error.text);
                    }
                })
                .fail(alert)
                .complete(function () {
                    $(".fa-spin").remove();
                })
        })
    })

    function buildData() {
        return {
            name: $("input[name=name]").val(),
            model: $("input[name=model]").val(),
            store: $("select[name=store]").children("option:selected").val(),
            brand: $("select[name=brand]").children("option:selected").val(),
            price: $("input[name=price]").val(),
            currency: $("input[name=currency]").val(),
            delivery: $("select[name=delivery]").children("option:selected").val(),
            size: $("select[name=size]").children("option:selected").val(),
            itemType: $("select[name=item-type]").children("option:selected").val(),
            platformHeight: $("input[name=platform-height]").val(),
            heelHeight: $("input[name=heel-height]").val(),
            shaftHeight: $("input[name=shaft-height]").val(),
            minimumCircumference: $("input[name=minimum-circumference]").val(),
            heel: $("select[name=heel]").children("option:selected").val(),
            strap: $("select[name=strap]").children("option:selected").val(),
            closure: $("select[name=closure]").children("option:selected").val(),
            pattern: $("select[name=pattern]").children("option:selected").val(),
            toe: $("select[name=toe]").children("option:selected").val(),
            lifestyle: $("select[name=lifestyle]").children("option:selected").val(),
            material: $("select[name=material]").children("option:selected").val(),
            heightMap: $("select[name=height-map]").children("option:selected").val(),
            bulletPoint: getMultiValue($("textarea[name=bullet-point]")),
            keyword: getMultiValue($("select[name=keyword]").children("option:selected")),
            feature: getMultiValue($("select[name=feature]").children("option:selected")),
            sku: getSKU()
        }
    }

    function getMultiValue(obj) {
        var data = [];
        obj.each(function () {
            data.push($(this).val());
        })
        return data;
    }

    function getSKU() {
        var data = [];
        $(".row").each(function () {
            var sku = $(this).find("input[name=sub-sku]");
            if (sku.length == 1) {
                data.push({
                    sku: sku.val(),
                    colorName: $(this).find("input[name=color-name]").val(),
                    colorMap: $(this).find("select[name=color-map]").children("option:selected").val()
                })
            }
        })
        return data;
    }

    function init() {
        setInput("name", "{{@data['name']}}");
        setInput("model", "{{@data['model']}}");
        setSelection("store", "{{@data['store']}}");
        setSelection("brand", "{{@data['brand']}}");
        setInput("price", "{{@data['price']}}");
        setInput("currency", "{{@data['currency']}}");
        setSelection("delivery", "{{@data['delivery']}}");
        setSelection("size", "{{@data['size']}}");
        setSelection("item-type", "{{@data['itemType']}}");
        setInput("platform-height", "{{@data['platformHeight']}}");
        setInput("heel-height", "{{@data['heelHeight']}}");
        setInput("shaft-height", "{{@data['shaftHeight']}}");
        setInput("minimum-circumference", "{{@data['minimumCircumference']}}");
        setSelection("heel", "{{@data['heel']}}");
        setSelection("strap", "{{@data['strap']}}");
        setSelection("closure", "{{@data['closure']}}");
        setSelection("pattern", "{{@data['pattern']}}");
        setSelection("toe", "{{@data['toe']}}");
        setSelection("lifestyle", "{{@data['lifestyle']}}");
        setSelection("material", "{{@data['material']}}");
        setSelection("height-map", "{{@data['heightMap']}}");

        <repeat group="{{@data['bulletPoint']}}" value="{{@value}}" key="{{@key}}">
        $("textarea[name=bullet-point]").eq("{{@key}}").val("{{@value}}");
        </repeat>

        <repeat group="{{@data['keyword']}}" value="{{@value}}">
        $("select[name=keyword]").children().each(function () {
            if ($(this).val() == "{{@value}}") {
                $(this).prop("selected", true);
                return false;
            }
        });
        </repeat>

        <repeat group="{{@data['feature']}}" value="{{@value}}">
        $("select[name=feature]").children().each(function () {
            if ($(this).val() == "{{@value}}") {
                $(this).prop("selected", true);
                return false;
            }
        });
        </repeat>

        <repeat group="{{@data['sku']}}" value="{{@value}}" key="{{@key}}">
        $("input[name=sub-sku]").eq("{{@key}}").val("{{@value['sku']}}");
        $("input[name=color-name]").eq("{{@key}}").val("{{@value['colorName']}}");
        $("select[name=color-map]").eq("{{@key}}").children().each(function () {
            if ($(this).val() == "{{@value['colorMap']}}") {
                $(this).prop("selected", true);
                return false;
            }
        });
        </repeat>
    }

    function setInput(name,value) {
        $("input[name=" + name + "]").val(value || "");
    }

    function setSelection(name, value) {
        $("select[name=" + name + "]").children().each(function () {
            if ($(this).val() == value) {
                $(this).prop("selected", true);
                return false;
            }
        })
    }
</script>
</body>
</html>
